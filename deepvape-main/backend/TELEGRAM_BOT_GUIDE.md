# Deepvape Telegram 管理機器人使用指南

## 🤖 功能概述

Deepvape Telegram 管理機器人讓您可以通過 Telegram 遠端管理網站的產品價格、庫存和公告，無需登入後台網站。

## 📋 主要功能

### 🔐 認證功能
- `/login` - 使用後台帳號密碼登入
- `/logout` - 登出當前會話
- 安全的會話管理

### 📊 查詢功能
- `/status` - 查看系統狀態
- `/stats` - 詳細統計報告
- `/products` - 產品列表管理
- `/announcements` - 公告列表管理

### 💰 產品管理
- **價格修改**：點擊產品 → 修改價格 → 輸入新價格
- **庫存管理**：點擊產品 → 修改庫存 → 輸入新數量
- **狀態切換**：啟用/停用產品
- **批量調價**：一次性調整所有產品價格
- **批量補貨**：自動補充低庫存產品

### 📢 公告管理
- **新增公告**：創建新的網站公告
- **編輯內容**：修改公告標題和內容
- **狀態管理**：啟用/停用公告
- **優先級設定**：高/中/低優先級
- **刪除公告**：安全刪除確認

## 🚀 安裝設定

### 1. 創建 Telegram 機器人

1. 在 Telegram 中搜尋 `@BotFather`
2. 發送 `/newbot` 創建新機器人
3. 按照指示設定機器人名稱（如：Deepvape 管理機器人）
4. 設定機器人用戶名（如：deepvape_admin_bot）
5. 獲取機器人 Token

### 2. 安裝依賴

```bash
cd backend
pip install -r telegram_requirements.txt
```

### 3. 設定環境變數

創建 `.env` 文件：
```bash
TELEGRAM_BOT_TOKEN=your_bot_token_here
```

或直接設定環境變數：
```bash
export TELEGRAM_BOT_TOKEN='your_bot_token_here'
```

### 4. 啟動機器人

```bash
python3 start_telegram_bot.py
```

## 📱 使用方式

### 首次使用

1. 在 Telegram 中搜尋您的機器人
2. 發送 `/start` 開始使用
3. 發送 `/login` 並輸入後台帳號密碼
4. 登入成功後即可使用所有功能

### 常用操作流程

#### 修改產品價格
1. 發送 `/products` 查看產品列表
2. 點擊要修改的產品
3. 點擊「💰 修改價格」
4. 輸入新價格（如：299）
5. 確認修改完成

#### 批量調價
1. 發送 `/products` 查看產品列表
2. 點擊「📊 批量調價」
3. 輸入調整百分比（如：10 表示漲價10%，-5 表示降價5%）
4. 確認批量調價完成

#### 管理庫存
1. 發送 `/products` 查看產品列表
2. 點擊要修改的產品
3. 點擊「📦 修改庫存」
4. 輸入新庫存數量（如：50）
5. 確認修改完成

#### 新增公告
1. 發送 `/announcements` 查看公告列表
2. 點擊「➕ 新增公告」
3. 輸入公告標題
4. 輸入公告內容
5. 公告自動啟用並發布

## 🔧 進階功能

### 系統監控
- `/status` - 即時系統狀態
- `/stats` - 詳細統計報告
- 自動低庫存警告

### 安全功能
- 登入驗證機制
- 會話超時保護
- 操作確認對話框
- 錯誤處理和回滾

### 批量操作
- 批量價格調整（支援百分比）
- 批量庫存補充（自動補充到20件）
- 批量狀態切換

## ⚠️ 注意事項

1. **安全性**：
   - 只有知道機器人用戶名的人才能找到機器人
   - 需要後台帳號密碼才能登入
   - 建議定期更改後台密碼

2. **操作確認**：
   - 重要操作（如刪除）會要求確認
   - 批量操作會顯示影響範圍
   - 所有操作都有即時反饋

3. **網路要求**：
   - 機器人需要穩定的網路連接
   - 後台服務必須正常運行
   - 建議在服務器上運行

## 🆘 故障排除

### 常見問題

**Q: 機器人無法啟動**
A: 檢查 Token 是否正確設定，依賴是否安裝完整

**Q: 登入失敗**
A: 確認使用的是後台管理帳號密碼（admin/admin123）

**Q: 無法修改產品**
A: 確認後台服務正常運行，數據庫連接正常

**Q: 機器人沒有回應**
A: 檢查網路連接，重啟機器人服務

### 日誌查看

機器人運行時會顯示詳細日誌：
- 啟動狀態
- 用戶操作記錄
- 錯誤信息
- 數據庫操作

## 📞 技術支援

如需技術支援，請提供：
1. 錯誤信息截圖
2. 機器人日誌
3. 操作步驟描述
4. 系統環境信息

---

**版本**：v1.0  
**更新日期**：2024年6月  
**相容性**：Python 3.8+, Telegram Bot API 6.0+ 